@page "/auth-debug"
@using System.Security.Claims
@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthStateProvider

<h3>Debug Auth</h3>

@if (_state is null)
{
    <p>Loading authentication state...</p>
}
else
{
    <p>IsAuthenticated: @_state.User.Identity?.IsAuthenticated</p>
    <p>Name: @_state.User.Identity?.Name</p>

    <h4>Claims</h4>
    <ul>
        @foreach (var claim in _state.User.Claims)
        {
            <li>@claim.Type = @claim.Value</li>
        }
    </ul>
}

@code {
    private AuthenticationState? _state;

    protected override async Task OnInitializedAsync()
    {
        _state = await AuthStateProvider.GetAuthenticationStateAsync();
    }
}